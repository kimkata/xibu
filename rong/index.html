<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="rebots" content="noindex,nofollow"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ’ç­è¡¨</title>
</head>
<body>
    <h3>æ’ç­è¡¨</h3> 
    <div id = "content"></div>
    <div id = "today"></div>
    <hr>
    
    <h4>æœªæ¥180å¤©æ—¶é—´è¡¨:</h4>
    <div id = "future"></div>
<script>

    function queryURL(url){
        var arr1 = url.split("?");
        if(arr1.length < 2){
            return {};
        }
        // if (typeof arr1[1] == "undefined") {
        //     return {};
        // }
        var params = arr1[1].split("&");
        var obj = {};
        for(var i=0;i<params.length;i++){
            var param = params[i].split("=");
            obj[param[0]] = param[1];
        }   
        return obj;
    }
    var url = window.location.href;
    var obj = queryURL(url);
    console.log(obj)

    //å¯ä»¥ä¿®æ”¹ä»¥ä¸‹numberçš„å€¼
    var number = decodeURIComponent(obj['number']||1);
    var date = new Date();
    var mseconds = Date.parse(date) + 8*60*60*1000;
    var hour = date.getHours();
    var min = date.getMinutes();
    var n = parseInt(mseconds/(24*60*60*1000))%2;
    console.log("n=",n,",number=",number);
    var workhour_a = "æ—©ç­ 07:30~13:00&nbspğŸŒ¤";
    var workhour_b = "æ™šç­ 13:00~21:00&nbspğŸŒ™";


    if (n == number) {
        //æ™šç­
        document.querySelector("#content").innerHTML = "<p>ç­æ¬¡: <font color='red'>"+ workhour_b +" </font></p>"; 
        if (hour < 13) {
            document.querySelector("#content").innerHTML += "<p>çŠ¶æ€: <font color='red'> 13:00ä»¥åè¦å»ä¸Šç­</font></p>";  
        } else if (hour>=13 & hour < 21) {
            document.querySelector("#content").innerHTML += "<p>çŠ¶æ€: <font color='red'>ä¸Šç­ä¸­ğŸ‘£ğŸ‘£</font></p>";            
        } else {
            document.querySelector("#content").innerHTML += "<p>çŠ¶æ€: <font color='red'>å·²ç»ä¸‹ç­ğŸ˜ğŸ˜ƒğŸ˜</font></p>";  
        }
    } else {
        //æ—©ç­
        document.querySelector("#content").innerHTML = "<p>ç­æ¬¡: <font color='red'>"+ workhour_a +"</font></p>"; 
        if (hour < 8 & min < 30) {
            document.querySelector("#content").innerHTML += "<p>çŠ¶æ€: <font color='red'>7:30ä»¥åè¦å»ä¸Šç­</font></p>";  
        } else if (hour >= 8 & hour < 13) {
            document.querySelector("#content").innerHTML += "<p>çŠ¶æ€: <font color='red'>ä¸Šç­ä¸­ğŸ‘£ğŸ‘£</font></p>";            
        } else {
            document.querySelector("#content").innerHTML += "<p>çŠ¶æ€:<font color='red'> å·²ç»ä¸‹ç­ğŸ˜ğŸ˜ƒğŸ˜</font></p>";  
        }
    }
    
    for (let delta = 0; delta < 180; delta++) {
        var date_2 = date.setDate(date.getDate()+ 1);
        var dateTime = new Date(date_2);
        if (n == number) {
            //ä»Šå¤©ä¸Šæ™šç­
            if (delta%2 == 0) {
                document.querySelector("#future").innerHTML += "<p><font color='green'>"+ format_date(dateTime)+", "+ workhour_a +"</font></p>";   
            }else{
                document.querySelector("#future").innerHTML += "<p><font color='red'>"+ format_date(dateTime)+", "+ workhour_b +"</font></p>"; 
            }        
        }else{
            //ä»Šå¤©ä¸Šæ—©ç­
            if (delta%2 == 0) {
                document.querySelector("#future").innerHTML += "<p><font color='green'>"+ format_date(dateTime)+", "+workhour_b+"</font></p>";   
            }else{
                document.querySelector("#future").innerHTML += "<p><font color='red'>"+ format_date(dateTime)+", "+workhour_a+"</font></p>"; 
            }   
        }
        if (dateTime.getDay()==0) {
            document.querySelector("#future").innerHTML += "<hr>"; 
        }             
    }

    function format_date(dateTime){
        let datelist = ['å‘¨æ—¥','å‘¨ä¸€','å‘¨äºŒ','å‘¨ä¸‰','å‘¨å››','å‘¨äº”','å‘¨å…­',]
        var year = dateTime.getFullYear();
        var month = dateTime.getMonth() + 1;
        var day = dateTime.getDate();
        var weekday = dateTime.getDay();
        return year + "-" + month + "-" + day + ", " + datelist[weekday];
    }



</script>
</body>
</html>

